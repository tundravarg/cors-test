<html>

<head>
    <title>Test CORS</title>
    <script src="lib/jquery.js"></script>
</head>

<body>
    <h1>Test CORS</h1>

    <div id="app">
        <div>
            <input id="request-static" type="button" value="Static">
            <input id="request-static-err" type="button" value="Static Err">
            <input id="request-backend-proxy" type="button" value="Backend (proxy)">
            <input id="request-backend" type="button" value="Backend (remote)">
        </div>
        <div id="response"></div>
    </div>

    <script>
        $().ready(() => {});

        let responseNo = 1;
        function setResponse(response) {
            $('#response').html(`${responseNo++}: ${response}`);
        }

        function doRequest(url) {
            $.get(url)
                .done(data => {
                    setResponse(data);
                })
                .fail((jqXHR, error) => {
                    setResponse(`ERROR: ${jqXHR.status}, ${jqXHR.statusText}`);
                });
        }

        function handleRequest(selector, url) {
            $(selector).on('click', () => doRequest(url));
        }

        handleRequest('#request-static', 'static-answer.txt');
        handleRequest('#request-static-err', 'static-answer-err.txt');
        handleRequest('#request-backend-proxy', '/local-backend');
        handleRequest('#request-backend', 'http://localhost:3000');
    </script>
</body>